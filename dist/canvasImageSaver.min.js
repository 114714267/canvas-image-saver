!function(t){"use strict";var o=function(o,i){if(this.canvas=o,this.cropOptions=i,t.cordova){if(!t.canvas2ImagePlugin)throw"You are using cordova. This library requires canvas2ImagePlugin.";this.saverImplementator={save:function(o){t.canvas2ImagePlugin.saveImageDataToLibrary(function(t){console.log(t)},function(t){console.error(t)},o)}}}else this.saverImplementator={save:function(){var t=document.createElement("a");t.download="avatar.png",t.href=avatar.toDataURL("image/png"),t.click()}}};o.prototype=Object.create(Object.prototype),o.prototype.constructor=o,o.prototype.configure=function(t,o){return this.canvas=t,this.cropOptions=o,this},o.prototype.save=function(){var t=this.canvas;return this.cropOptions&&(this.cropOptions.xCropOffset=this.cropOptions.xCropOffset||0,this.cropOptions.yCropOffset=this.cropOptions.yCropOffset||0,this.cropOptions.width=this.cropOptions.width||this.canvas.width-this.cropOptions.xCropOffset,this.cropOptions.height=this.cropOptions.height||this.canvas.height-this.cropOptions.yCropOffset,t=document.createElement("canvas"),t.width=this.cropOptions.width,t.height=this.cropOptions.height,t.getContext("2d").drawImage(this.canvas,this.cropOptions.xCropOffset,this.cropOptions.yCropOffset,t.width,t.height,0,0,t.width,t.height)),this.saverImplementator.save(t)},t.CanvasImageSaver=o}(window);