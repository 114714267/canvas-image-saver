!function(t){"use strict";function i(t){this.anchor=document.createElement("a"),this.fileName=t||"canvas.png"}function s(t,s,e,n,a){var h=function(){};this.canvas=t,this.cropOptions=s,this.successCallback=e||h,this.errorCallback=n||h,this.callbackContext=a||this,this.saverImplementator=window.cordova?new o:new i}function o(){if(!window.canvas2ImagePlugin)throw"You are using cordova. This library requires canvas2ImagePlugin."}i.prototype.save=function(t,i){this.anchor.download=this.fileName,this.anchor.href=t.toDataURL("image/png"),this.anchor.click(),i(t,fileName)},"object"==typeof exports&&"undefined"!=typeof module?module.exports=s:t.CanvasImageSaver=s,s.prototype={save:function(){var t;return this.cropOptions?(this.cropOptions.xCropOffset=this.cropOptions.xCropOffset||0,this.cropOptions.yCropOffset=this.cropOptions.yCropOffset||0,this.cropOptions.width=this.cropOptions.width||this.canvas.width-this.cropOptions.xCropOffset,this.cropOptions.height=this.cropOptions.height||this.canvas.height-this.cropOptions.yCropOffset,t=document.createElement("canvas"),t.width=this.cropOptions.width,t.height=this.cropOptions.height,t.getContext("2d").drawImage(this.canvas,this.cropOptions.xCropOffset,this.cropOptions.yCropOffset,t.width,t.height,0,0,t.width,t.height)):t=this.canvas,this.saverImplementator.save(t,this.successCallback.bind(this.callbackContext),this.errorCallback.bind(this.callbackContext))}},o.prototype.save=function(t,i,s){window.canvas2ImagePlugin.saveImageDataToLibrary(function(s){i(t,s)},function(t){console.error(t),s(t)},t)}}(this);