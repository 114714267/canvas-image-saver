!function(t){"use strict";function s(t,s,o,i,a){var e=this,n=function(){};if(this.canvas=t,this.cropOptions=s,this.successCallback=o||n,this.errorCallback=i||n,this.callbackContext=a||this,window.cordova){if(!window.canvas2ImagePlugin)throw"You are using cordova. This library requires canvas2ImagePlugin.";this.saverImplementator={save:function(t){window.canvas2ImagePlugin.saveImageDataToLibrary(function(s){console.log(s),e.successCallback.call(e.callbackContext,t)},function(t){console.error(t),e.errorCallback.call(e.callbackContext)},t)}}}else this.saverImplementator={save:function(t){var s=document.createElement("a");s.download="canvas.png",s.href=t.toDataURL("image/png"),s.click(),e.successCallback.call(e.callbackContext,t)}}}"object"==typeof exports&&"undefined"!=typeof module?module.exports=s:t.CanvasImageSaver=s,s.prototype={constructor:s,save:function(){var t=this.canvas;return this.cropOptions&&(this.cropOptions.xCropOffset=this.cropOptions.xCropOffset||0,this.cropOptions.yCropOffset=this.cropOptions.yCropOffset||0,this.cropOptions.width=this.cropOptions.width||this.canvas.width-this.cropOptions.xCropOffset,this.cropOptions.height=this.cropOptions.height||this.canvas.height-this.cropOptions.yCropOffset,t=document.createElement("canvas"),t.width=this.cropOptions.width,t.height=this.cropOptions.height,t.getContext("2d").drawImage(this.canvas,this.cropOptions.xCropOffset,this.cropOptions.yCropOffset,t.width,t.height,0,0,t.width,t.height)),this.saverImplementator.save(t)}}}(this);