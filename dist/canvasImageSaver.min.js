!function(t){"use strict";var s=function(s,o,a,i,e){var c=this,r=function(){};if(this.canvas=s,this.cropOptions=o,this.successCallback=a||r,this.errorCallback=i||r,this.callbackContext=e||this,t.cordova){if(!t.canvas2ImagePlugin)throw"You are using cordova. This library requires canvas2ImagePlugin.";this.saverImplementator={save:function(s){t.canvas2ImagePlugin.saveImageDataToLibrary(function(t){console.log(t),c.successCallback.call(c.callbackContext,s)},function(t){console.error(t),c.errorCallback.call(c.callbackContext)},s)}}}else this.saverImplementator={save:function(t){var s=document.createElement("a");s.download="canvas.png",s.href=t.toDataURL("image/png"),s.click(),c.successCallback.call(c.callbackContext,t)}}};s.prototype=Object.create(Object.prototype),s.prototype.constructor=s,s.prototype.save=function(){var t=this.canvas;return this.cropOptions&&(this.cropOptions.xCropOffset=this.cropOptions.xCropOffset||0,this.cropOptions.yCropOffset=this.cropOptions.yCropOffset||0,this.cropOptions.width=this.cropOptions.width||this.canvas.width-this.cropOptions.xCropOffset,this.cropOptions.height=this.cropOptions.height||this.canvas.height-this.cropOptions.yCropOffset,t=document.createElement("canvas"),t.width=this.cropOptions.width,t.height=this.cropOptions.height,t.getContext("2d").drawImage(this.canvas,this.cropOptions.xCropOffset,this.cropOptions.yCropOffset,t.width,t.height,0,0,t.width,t.height)),this.saverImplementator.save(t)},t.CanvasImageSaver=s}(window);